	<h1><span>Создание виртуальной машины bhyve</span></h1>
	
	<h2><a name="jcreate_cmd">Команда bcreate, bconstruct-tui</a></h2>
	<div class="block">
		<pre class="brush:bash;ruler=true;">
		% cbsd bconstruct-tui
		</pre>
		<pre class="brush:bash;ruler=true;">
		% cbsd bcreate jconf=/path/to/conf.jconf
		</pre>
	</div>
	
	<div class="block">
		<strong>Описание:</strong>
		<p>Виртуальная машина создается по заранее сформированному конфигурационному файлу через <strong>cbsd bcreate jconf=path_to_cfg</strong>.</p>
		<p>Для формирования конфигурации можно воспользоваться скриптом <strong>cbsd bconstruct-tui</strong>, либо WEB интерфейсом.</p>
	</div>
	<div>
	<div class="block">
		<p>Для создания через DIALOG:</p>
		<pre class="brush:bash;ruler=true;">
		% cbsd bconstruct-tui
		</pre>
		<p>Это же меню для создания jail доступно при конфигурировании <strong>CBSD</strong> через bsdconfig</p>
		<p class="text-center"><img src="/img/cbsd_syntax3.png" alt="" /></p>
		<p>Если <strong>bconstruct-tui</strong> отработала корректно, по окончанию будет задан вопрос о создании виртуальной машины. В случае
		положительно ответа, <strong>bcreate</strong> будет выполнен на новую конфигурацию автоматически. В противном случае,
		скрипт выведет путь к конфигурационному файлу (в <em>$workdir/tmp</em>), по которой можно создать виртуальную.</p>
	</div>
	<div class="block">
	<p>Опции и их краткое описание, которые фигурируют в диалоговой форме. В зависимости от выбранного типа OS и профиля, некоторые из них могут быть недоступны:</p>
	<ul>
		<li>vm_os_type - тип ОС. В зависимости от типа гостевой ОС, будет предложен тот или иной набор профилей дистрибутивов</li>
		<li>vm_os_profile - выбрать профиля дистрибутива. Профиль может содержать как предлагаемые по-умолчанию параметры описанные ниже, так и специфичные дистрибутиву настройки (URL для получения образа, параметры загрузки ядра и тд)</li>
		<li>imgsize - Размер создаваемого первого диска. Если гостевая ОС - FreeBSD и профиль FreeBSD-from-jail (генерация образа через jail2iso), то этот параметр указывает на размер свободного места после копирования дистрибутива</li>
		<li>jname - имя виртуальной машины, одним словом.</li>
		<li>host_hostname - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: установить параметр hostname в /etc/rc.conf гостевой ОС в соответствующее значение</li>
		<li>vm_ram - выделяемый объем оперативной памяти</li>
		<li>vm_cpus - количество виртуальных ядер процессора</li>
		<li>vm_hostbridge - host bridge гостевой ОС. Может быть hostbridge или amd_hostbridge (влияет на PCI vendor ID)</li>
		<li>astart - признак автоматического запуска виртуальной машины вместе с загрузкой ноды</li>
		<li>interface - аплинковый интерфейс для tap-интерфейса, первой сетевой карты виртуальной машины</li>
		<li>pkglist - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: выбрать соответствующие пекеджи, которые будут предустановлены в создаваемую VM</li>
		<li>ip4_addr - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: установить параметр ifconfig_NIC в /etc/rc.conf гостевой ОС в соответствующее значение - может быть IP адресом или 'DHCP'</li>
		<li>gw4 - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: установить defaultrouter параметр в /etc/rc.conf гостевой ОС в соответствующее значение</li>
		<li>ver - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: использовать базу и ядро указанной версии (например 10.1, 11.0, 12 )</li>
		<li>applytpl - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: применить ли дополнительные настройки (/etc/hosts, /etc/make.conf)</li>
		<li>floatresolv - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: установить в /etc/resolv.conf сервера, перечисленные в параметре jnameserver</li>
		<li>arch - актуально только для гостевой ОС FreeBSD и профиля FreeBSD-from-jail: использовать базу и ядро указанной архитектуры (например i386, amd64)</li>
	</ul>
	
